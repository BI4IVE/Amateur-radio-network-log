# 部署检查清单

## 问题确认
- **最后部署版本**: 041e085 (1月9日18:23:55)
- **最新版本**: e7f18b0 (包含管理工具)
- **问题**: 部署环境无法使用 admin/admin123 登录

## 已完成的修复

### 1. 大小写不敏感登录 (041e085)
- ✅ 用户名查找改为大小写不敏感 (使用 LOWER 函数)
- ✅ 密码验证改为大小写不敏感
- ✅ 本地测试 admin/admin123 成功

### 2. 管理工具 (e7f18b0)
- ✅ 用户列表查看 API: `/api/debug/users`
- ✅ 用户创建/更新 API: `/api/debug/users`
- ✅ 管理工具页面: `/admin-tools`

## 部署后检查步骤

### 1. 等待部署完成
等待几分钟，确认部署环境更新到最新版本。

### 2. 检查版本信息
访问以下页面，查看是否为新版本：


如果页面无法访问或显示错误，说明部署环境未更新。

### 3. 查看用户列表
访问管理工具页面: 

检查是否有以下用户：
- ADMIN (管理员)
- testuser (测试用户)
- BI4IVE (用户)

如果没有 ADMIN 用户，需要创建一个。

### 4. 创建或更新 ADMIN 用户
在管理工具页面中：
- 用户名: `ADMIN`
- 密码: `ADMIN123`
- 姓名: `管理员`
- 角色: `admin`
- 点击"更新用户"（如果存在）或"创建用户"

### 5. 测试登录
使用以下账号测试登录：
- 用户名: `admin` 或 `ADMIN`
- 密码: `admin123` 或 `ADMIN123`

所有组合都应该可以登录。

### 6. 验证大小写不敏感
使用不同的组合测试：
- `admin` / `admin123` ✅
- `ADMIN` / `ADMIN123` ✅
- `admin` / `ADMIN123` ✅
- `ADMIN` / `admin123` ✅

## 可能的问题和解决方案

### 问题 1: 部署环境未更新
**症状**: 访问 /debug 或 /admin-tools 显示 404
**解决**: 等待部署完成，或手动触发重新部署

### 问题 2: 数据库中没有 ADMIN 用户
**症状**: 管理工具显示用户列表为空，或没有 ADMIN 用户
**解决**: 使用管理工具创建 ADMIN 用户（见步骤 4）

### 问题 3: 数据库密码错误
**症状**: 即使有 ADMIN 用户，也无法登录
**解决**: 使用管理工具更新 ADMIN 用户的密码为 `ADMIN123`

### 问题 4: 代码未生效
**症状**: 即使更新了用户，还是无法登录
**解决**: 检查代码是否为最新版本，访问 `/debug` 查看诊断信息

## 临时解决方案

如果无法立即修复，可以使用以下方式登录：
- 用户名: `ADMIN` (全大写)
- 密码: `ADMIN123` (全大写)

这是数据库中存储的原始账号，应该可以登录。

## 联系支持

如果以上步骤都无法解决问题，请提供：
1. 访问 `/debug` 页面的诊断信息
2. 访问 `/admin-tools` 页面的用户列表
3. 登录时显示的错误信息
4. 浏览器控制台的错误日志

---

**注意**: 管理工具页面包含敏感功能，建议在部署后删除或添加访问控制。
